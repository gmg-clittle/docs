---
title: 'Market-Based Pricing Display'
description: 'Injects Market Based Price and Save $X into Dealer.com SRP listings using data from HomeNet, cached via Upstash Redis.'
icon: 'tag'
---

## Overview

Enhance your dealership SRP listings by automatically injecting market-based pricing and savings indicators using real-time MSRP data.

<AccordionGroup>

<Accordion icon="cog" title="What the Script Does">
  This JavaScript enhancement script:
  - Hooks into the Dealer.com SRP lifecycle using `window.DDC`
  - Gathers all `USED` VINs on the page
  - Calls a serverless API to retrieve MSRP values
  - Injects a styled badge showing “Market Based Price” and “Save $X” if applicable
</Accordion>

<Accordion icon="database" title="Backend Overview">
  The backend API:
  - Uses HomeNet’s `LoadCompressedVehicles` endpoint
  - Filters for all `USED` inventory at a specific rooftop
  - Caches results in [Upstash Redis](https://upstash.com/) for 6 hours
  - Filters results server-side to return only relevant VINs
</Accordion>

<Accordion icon="code" title="Tech Stack + Services">
  - **Dealer.com DDC API** – Client-side integration and event lifecycle
  - **HomeNet API** – Vehicle data source (returns compressed XML)
  - **Upstash Redis** – 6-hour caching for reduced API traffic
  - **Vercel Edge Functions** – Hosting for your VIN-based API handler
</Accordion>

</AccordionGroup>

## Key Script Behavior

1. Waits for `page-load-v1` on the SRP.
2. Collects all `used` VINs using `API.utils.getAttributeForVehicles('vin')`.
3. Makes an API call to your VIN MSRP endpoint:
4. Displays:
- A strikethrough MSRP ("Market Based Price")
- A green badge (`Save $X`) if `msrp > finalPrice`

## UI Injection Example

```html
<div class="market-pricing-info">
<div>
 <span style="color: #c00;">Market Based Price:</span>
 <span style="color: #c00; text-decoration: line-through;"> $27,990</span>
</div>
<div style="background: #28a745; color: white; font-size: 10px; border-radius: 12px; padding: 2px 8px;">
 Save $2,000
</div>
</div>
